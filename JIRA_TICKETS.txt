JIRA BACKLOG - FORTNITE PRONOS
Date: 2026-01-17
Owner: Codex

EPIC: JIRA-ARCH-000 - Architecture Review
Summary: Stabilize architecture boundaries and remove mixed patterns.
Status: OPEN
Priority: P0

JIRA-POSTGRES-002 - Validate Flyway migrations
Type: Task
Priority: P1
Status: IN PROGRESS
Context: App startup was blocked earlier by Flyway concurrency; DB now shows V1, V4, V6, V9.1, V10.1, V12-V29 applied.
Steps:
- Start app with dev profile.
- Check http://localhost:8080/actuator/health.
- Review logs for Flyway warnings/errors.
Acceptance:
- Health endpoint returns UP.
- No Flyway errors.
Dependencies: none
Estimate: 1h

JIRA-SUPABASE-001 - Configure Supabase
Type: Task
Priority: P2
Status: TODO
Context: Supabase variables are not configured; cannot validate remote workflows.
Steps:
- Set SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_SCHEMA, SUPABASE_SEED_GAME_ID.
- Run seed/health check.
Acceptance:
- Supabase connectivity verified.
- Seed completed and endpoints return data.
Dependencies: JIRA-POSTGRES-002
Estimate: 2h

JIRA-LOGBACK-001 - Fix logback springProfile nesting
Type: Task
Priority: P3
Status: TODO
Context: springProfile is nested inside logger, causing warnings.
Steps:
- Move springProfile to root of logback-spring.xml.
- Restart app and verify warnings are gone.
Acceptance:
- No logback profile warnings on startup.
Dependencies: none
Estimate: 30m

JIRA-CLEANUP-001 - Remove invalid 'nul' files
Type: Task
Priority: P4
Status: TODO
Context: Windows created dummy files named 'nul' in repo folders.
Steps:
- Prepare deletion report (file | reason | references | decision).
- After approval, delete files and commit.
Acceptance:
- No 'nul' files in repo.
Dependencies: approval of deletion report
Estimate: 30m

JIRA-TRACK-001 - Resolve untracked files
Type: Task
Priority: P2
Status: TODO
Context: New service/tests and migration are untracked.
Files:
- src/main/java/com/fortnite/pronos/service/UserService.java
- src/main/java/com/fortnite/pronos/service/TeamQueryService.java
- src/main/resources/db/migration/V29__create_player_aliases.sql
- src/test/java/com/fortnite/pronos/service/UserServiceTest.java
- src/test/java/com/fortnite/pronos/service/TeamQueryServiceTest.java
- src/test/java/com/fortnite/pronos/config/CommonsLoggingClasspathTest.java
- src/test/java/com/fortnite/pronos/config/HibernateDialectConfigTest.java
- src/test/java/com/fortnite/pronos/config/RedisRepositoryConfigTest.java
- src/test/java/com/fortnite/pronos/model/CompositeIdEqualityTest.java
- src/test/java/com/fortnite/pronos/model/EnumMappingTest.java
Steps:
- Decide add vs remove.
- Commit intended files.
Acceptance:
- Working tree clean of unintended untracked files.
Dependencies: none
Estimate: 1h

JIRA-ARCH-001 - Clarify target architecture
Type: Task
Priority: P0
Status: TODO
Context: Mixed Layered/Clean architecture patterns with unclear boundaries.
Steps:
- Pick target architecture (Layered or Hexagonal).
- Write ADR with dependency rules.
- Update ArchitectureTest to enforce rules.
Acceptance:
- Architecture tests fail on invalid dependencies.
Dependencies: none
Estimate: 4h

JIRA-ARCH-002 - Separate responsibilities
Type: Task
Priority: P0
Status: TODO
Context: Controllers mix routing, auth, and business logic.
Steps:
- Inventory business rules in controllers/entities.
- Move business logic to services/use cases.
- Keep controllers as routing + validation.
Acceptance:
- Controllers contain no orchestration logic.
Dependencies: JIRA-ARCH-001
Estimate: 8h

JIRA-ARCH-003 - Invert dependencies
Type: Task
Priority: P1
Status: IN PROGRESS
Context: Controllers no longer inject repositories, but use cases still depend on infrastructure.
Steps:
- Create repository interfaces (ports) for core use cases.
- Swap use cases to depend on abstractions.
- Enforce in architecture tests.
Acceptance:
- No repository injection in controllers.
- Use cases depend only on interfaces.
Dependencies: JIRA-ARCH-001
Estimate: 6h

JIRA-ARCH-004 - Reduce coupling
Type: Task
Priority: P1
Status: TODO
Context: Some classes have too many dependencies and low cohesion.
Steps:
- Audit classes with >7 dependencies.
- Extract focused services or strategies.
Acceptance:
- Each class has a single responsibility.
Dependencies: JIRA-ARCH-001
Estimate: 8h

JIRA-ARCH-005 - Isolate domain
Type: Task
Priority: P1
Status: TODO
Context: Domain logic coupled to JPA entities.
Steps:
- Create pure domain objects (no JPA annotations).
- Add mappers Entity <-> Domain.
- Move rules from entities into domain/services.
Acceptance:
- Domain layer independent from persistence.
Dependencies: JIRA-ARCH-001
Estimate: 12h

JIRA-ARCH-006 - Improve testability
Type: Task
Priority: P2
Status: TODO
Context: Logic in controllers/entities increases test cost.
Steps:
- Extract logic into services.
- Increase unit test ratio over integration.
Acceptance:
- Unit tests cover core logic with mocks.
Dependencies: JIRA-ARCH-002
Estimate: 4h

JIRA-ARCH-007 - Remove parallel paths
Type: Task
Priority: P1
Status: TODO
Context: Multiple execution paths for same operations (Game/Draft/Trade).
Steps:
- Map current flows.
- Pick canonical path per operation.
- Delete unused branches.
Acceptance:
- Single path per operation.
Dependencies: JIRA-ARCH-001
Estimate: 6h

JIRA-ARCH-008 - Reduce structural debt
Type: Task
Priority: P1
Status: TODO
Context: Dead code in core/domain and permissive arch tests.
Steps:
- Remove unused core/domain packages.
- Tighten architecture tests.
- Unify seeding logic.
Acceptance:
- No dead code; architecture rules enforced.
Dependencies: JIRA-ARCH-001
Estimate: 8h

JIRA-ARCH-009 - Improve onboarding
Type: Task
Priority: P2
Status: TODO
Context: New devs do not know where to add logic.
Steps:
- Document naming conventions and package responsibilities.
- Update README.
Acceptance:
- Onboarding guide added and referenced.
Dependencies: JIRA-ARCH-001
Estimate: 4h

JIRA-ARCH-010 - Align with modern principles
Type: Task
Priority: P1
Status: TODO
Context: Boundaries are not compile-time enforced.
Steps:
- Define explicit boundaries (modules or packages).
- Add compile-time validation.
Acceptance:
- Invalid dependencies fail at build time.
Dependencies: JIRA-ARCH-001
Estimate: 4h
