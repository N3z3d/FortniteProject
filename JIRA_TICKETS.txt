JIRA BACKLOG - FORTNITE PRONOS
Date: 2026-01-17
Owner: Codex

EPIC: JIRA-ARCH-000 - Architecture Review
Summary: Stabilize architecture boundaries and remove mixed patterns.
Status: OPEN
Priority: P0

JIRA-POSTGRES-002 - Validate Flyway migrations
Type: Task
Priority: P1
Status: IN PROGRESS
Context: Flyway migrations are applied in DB (V1, V4, V6, V9.1, V10.1, V12-V29), but app health was not validated after latest changes.
Steps:
- Start app with dev profile.
- Check http://localhost:8080/actuator/health.
- Review logs for Flyway warnings/errors.
Acceptance:
- Health endpoint returns UP.
- No Flyway errors on startup.
Dependencies: none
Estimate: 1h

JIRA-SUPABASE-001 - Configure Supabase
Type: Task
Priority: P2
Status: TODO
Context: Supabase variables are not configured; remote workflows cannot be validated.
Steps:
- Set SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_SCHEMA, SUPABASE_SEED_GAME_ID.
- Run seed/health check.
- Validate any dependent endpoints.
Acceptance:
- Supabase connectivity verified.
- Seed completed and endpoints return data.
Dependencies: JIRA-POSTGRES-002
Estimate: 2h

JIRA-LOGBACK-001 - Fix logback springProfile nesting
Type: Task
Priority: P3
Status: TODO
Context: springProfile is nested inside a logger, causing warnings.
Steps:
- Move springProfile to root of logback-spring.xml.
- Restart app and verify warnings are gone.
Acceptance:
- No logback profile warnings on startup.
Dependencies: none
Estimate: 30m

JIRA-CLEANUP-001 - Remove invalid 'nul' files
Type: Task
Priority: P4
Status: TODO
Context: Windows created dummy files named 'nul' in repo folders.
Steps:
- Prepare deletion report (file | reason | references | decision).
- After approval, delete files and commit.
Acceptance:
- No 'nul' files in repo.
Dependencies: approval of deletion report
Estimate: 30m

JIRA-ARCH-001 - Clarify target architecture
Type: Task
Priority: P0
Status: TODO
Context: Mixed Layered/Clean architecture patterns with unclear boundaries.
Steps:
- Pick target architecture (Layered or Hexagonal).
- Write ADR with dependency rules.
- Update ArchitectureTest to enforce rules.
Acceptance:
- Architecture tests fail on invalid dependencies.
Dependencies: none
Estimate: 4h

JIRA-ARCH-002 - Separate responsibilities
Type: Task
Priority: P0
Status: TODO
Context: Controllers still contain business logic and orchestration beyond routing/validation.
Steps:
- Inventory business rules in controllers/entities.
- Move business logic into services/use cases.
- Keep controllers as routing + validation.
Acceptance:
- Controllers contain no orchestration logic.
Dependencies: JIRA-ARCH-001
Estimate: 8h

JIRA-ARCH-003 - Invert dependencies (use cases -> ports)
Type: Task
Priority: P1
Status: IN PROGRESS
Context: Controllers and user context now delegate to services; remaining risk is core use cases still depending on repositories.
Steps:
- Define repository interfaces (ports) for core use cases.
- Add adapters in infrastructure to implement those ports.
- Swap use cases to depend on abstractions only.
- Enforce dependency rules in ArchitectureTest.
Acceptance:
- Use cases depend only on interfaces (ports).
- Architecture tests enforce dependency inversion.
Dependencies: JIRA-ARCH-001
Estimate: 6h

JIRA-ARCH-004 - Reduce coupling
Type: Task
Priority: P1
Status: TODO
Context: Some classes have too many dependencies and low cohesion.
Steps:
- Audit classes with >7 dependencies.
- Extract focused services or strategies.
- Reduce cross-cutting dependency graphs.
Acceptance:
- Each class has a single responsibility and reduced dependency count.
Dependencies: JIRA-ARCH-001
Estimate: 8h

JIRA-ARCH-005 - Isolate domain
Type: Task
Priority: P1
Status: TODO
Context: Domain logic remains coupled to JPA entities.
Steps:
- Create pure domain objects (no JPA annotations).
- Add mappers Entity <-> Domain.
- Move rules from entities into domain/services.
Acceptance:
- Domain layer independent from persistence.
Dependencies: JIRA-ARCH-001
Estimate: 12h

JIRA-ARCH-006 - Improve testability
Type: Task
Priority: P2
Status: TODO
Context: Logic in controllers/entities increases test cost.
Steps:
- Extract logic into services.
- Increase unit test ratio over integration.
- Add tests for edge cases and error paths.
Acceptance:
- Unit tests cover core logic with mocks.
Dependencies: JIRA-ARCH-002
Estimate: 4h

JIRA-ARCH-007 - Remove parallel paths
Type: Task
Priority: P1
Status: TODO
Context: Multiple execution paths for same operations (Game/Draft/Trade).
Steps:
- Map current flows (controllers/services/use cases).
- Pick canonical path per operation.
- Delete unused branches.
Acceptance:
- Single path per operation.
Dependencies: JIRA-ARCH-001
Estimate: 6h

JIRA-ARCH-008 - Reduce structural debt
Type: Task
Priority: P1
Status: TODO
Context: Dead code in core/domain and permissive architecture tests.
Steps:
- Remove unused core/domain packages.
- Tighten architecture tests.
- Unify seeding logic.
Acceptance:
- No dead code; architecture rules enforced.
Dependencies: JIRA-ARCH-001
Estimate: 8h

JIRA-ARCH-009 - Improve onboarding
Type: Task
Priority: P2
Status: TODO
Context: New developers do not know where to add logic.
Steps:
- Document naming conventions and package responsibilities.
- Update README.
Acceptance:
- Onboarding guide added and referenced.
Dependencies: JIRA-ARCH-001
Estimate: 4h

JIRA-ARCH-010 - Align with modern principles
Type: Task
Priority: P1
Status: TODO
Context: Boundaries are not compile-time enforced.
Steps:
- Define explicit boundaries (modules or packages).
- Add compile-time validation.
Acceptance:
- Invalid dependencies fail at build time.
Dependencies: JIRA-ARCH-001
Estimate: 4h

JIRA-OPS-001 - Restore developer toolchain (git/maven)
Type: Task
Priority: P0
Status: TODO
Context: Local environment lacks git and Maven binaries, blocking commits, pushes, and TDD execution.
Steps:
- Install git and ensure it is on PATH.
- Install Maven or add mvnw wrapper and document usage.
- Validate by running `git status` and `mvn -v`.
Acceptance:
- `git status` works without errors.
- `mvn -v` works and build commands can run tests.
Dependencies: none
Estimate: 30m

JIRA-CLEANUP-002 - Remove legacy patch/log artifacts
Type: Task
Priority: P2
Status: TODO
Context: Root contains outdated patch/log files (dashboard-i18n.patch/.code.patch/.tests.patch, temp_gc.txt, test_results.txt, backend.log, backend_output.log, replay_pid*.log, null-device-placeholder) that are not referenced by code.
Steps:
- Prepare deletion report (file | raison | références | décision) per AGENTS guidelines.
- Validate no code/docs references for each candidate.
- Delete approved files and adjust `.gitignore` if needed.
Acceptance:
- Deletion report approved and archived.
- Files removed and repository clean.
Dependencies: deletion report approval
Estimate: 45m

JIRA-ARCH-011 - Deduplicate leaderboard DTOs
Type: Task
Priority: P1
Status: TODO
Context: Duplicate leaderboard DTOs exist in `dto` root and `dto/leaderboard` packages (e.g., PlayerLeaderboardEntryDTO), creating divergence risk and coupling issues.
Steps:
- Inventory usages of each leaderboard DTO across controllers/services/mappers/tests.
- Select a single canonical DTO and refactor callers to it.
- Remove redundant DTOs and update serialization tests.
Acceptance:
- Only one leaderboard DTO type remains in use across the API surface.
- Tests updated and passing.
Dependencies: JIRA-ARCH-001
Estimate: 2h

