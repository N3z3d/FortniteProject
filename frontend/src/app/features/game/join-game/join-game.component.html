<div class="join-game-container">
  <div class="join-game-card-wrapper">
    <mat-card class="join-game-card">
      <mat-card-header>
        <div class="header-content">
          <mat-icon class="header-icon">vpn_key</mat-icon>
          <div>
            <mat-card-title>Rejoindre une partie</mat-card-title>
            <mat-card-subtitle>Entrez le code d'invitation reçu</mat-card-subtitle>
          </div>
        </div>
      </mat-card-header>

      <mat-card-content>
        <div class="join-instructions">
          <mat-icon class="info-icon">info</mat-icon>
          <p>
            Pour rejoindre une partie existante, demandez le code d'invitation
            au créateur de la partie et saisissez-le ci-dessous.
          </p>
        </div>

        <form (ngSubmit)="joinWithCode()" class="join-form">
          <mat-form-field appearance="outline" class="code-input">
            <mat-label>Code d'invitation</mat-label>
            <input
              matInput
              [(ngModel)]="invitationCode"
              name="invitationCode"
              placeholder="Ex: FORTNITE2024"
              [disabled]="joiningGame"
              maxlength="20"
              required
              autocomplete="off"
            />
            <mat-icon matPrefix>confirmation_number</mat-icon>
            <mat-hint>Le code est sensible à la casse</mat-hint>
          </mat-form-field>

          <div class="action-buttons">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="!invitationCode.trim() || joiningGame"
              class="join-button"
            >
              <mat-icon *ngIf="!joiningGame">login</mat-icon>
              <mat-spinner *ngIf="joiningGame" diameter="20"></mat-spinner>
              {{ joiningGame ? 'Connexion en cours...' : 'Rejoindre la partie' }}
            </button>

            <button
              mat-stroked-button
              type="button"
              (click)="cancel()"
              [disabled]="joiningGame"
              class="cancel-button"
            >
              <mat-icon>cancel</mat-icon>
              Annuler
            </button>
          </div>
        </form>

        <div class="help-section">
          <mat-icon class="help-icon">help_outline</mat-icon>
          <div class="help-text">
            <p class="help-title">Vous n'avez pas de code ?</p>
            <p class="help-description">
              Demandez au créateur de la partie de vous partager le code d'invitation,
              ou créez votre propre partie.
            </p>
            <button
              mat-button
              color="accent"
              (click)="router.navigate(['/games/create'])"
              [disabled]="joiningGame"
            >
              <mat-icon>add_circle</mat-icon>
              Créer une nouvelle partie
            </button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
