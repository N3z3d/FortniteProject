<!-- Trade Hub - Premium Marketplace Design -->
<div class="trade-hub-container">
    <!-- Market Hero Section -->
    <header class="market-hero">
        <div class="hero-decoration">
            <div class="glow-orb left"></div>
            <div class="glow-orb right"></div>
        </div>

        <div class="hero-content">
            <div class="market-status">
                <span class="status-indicator live"></span>
                <span class="status-text">MARCHÉ OUVERT</span>
            </div>

            <h1 class="market-title">Trade Hub</h1>
            <p class="market-subtitle">Échangez vos joueurs pour maximiser votre score</p>

            <div class="market-stats">
                <div class="stat-item">
                    <span class="stat-value">{{ trades.length }}</span>
                    <span class="stat-label">Offres totales</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-value">{{ getActiveTradesCount() }}</span>
                    <span class="stat-label">En cours</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Controls Bar -->
    <div class="controls-bar">
        <div class="search-wrapper">
            <mat-icon class="search-icon">search</mat-icon>
            <input type="text" placeholder="Rechercher un joueur ou une équipe..." [(ngModel)]="searchTerm"
                (input)="applyFilters()" class="search-input" />
        </div>

        <div class="filter-tabs">
            <button class="tab-btn" [class.active]="activeTab === 'ALL'" (click)="setTab('ALL')">
                Tout
            </button>
            <button class="tab-btn" [class.active]="activeTab === 'PENDING'" (click)="setTab('PENDING')">
                En cours
                <span class="badge" *ngIf="getPendingCount() > 0">{{ getPendingCount() }}</span>
            </button>
            <button class="tab-btn" [class.active]="activeTab === 'HISTORY'" (click)="setTab('HISTORY')">
                Historique
            </button>
        </div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
        <div class="spinner"></div>
        <p>Chargement des trades...</p>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!isLoading && filteredTrades.length === 0">
        <mat-icon class="empty-icon">swap_horiz</mat-icon>
        <h3>Aucun trade trouvé</h3>
        <p *ngIf="searchTerm">Aucun résultat pour "{{ searchTerm }}"</p>
        <p *ngIf="!searchTerm && activeTab === 'PENDING'">Vous n'avez aucun trade en cours</p>
        <p *ngIf="!searchTerm && activeTab === 'HISTORY'">Aucun historique de trade</p>
        <p *ngIf="!searchTerm && activeTab === 'ALL'">Commencez par créer votre premier trade</p>
        <button mat-raised-button color="primary" (click)="createNewTrade()">
            <mat-icon>add</mat-icon>
            Créer un Trade
        </button>
    </div>

    <!-- Trades Grid -->
    <div class="trades-grid" *ngIf="!isLoading && filteredTrades.length > 0">
        <div class="trade-card" *ngFor="let trade of filteredTrades; trackBy: trackByTradeId"
            [class.pending]="trade.status === 'PENDING'" [class.completed]="trade.status === 'COMPLETED'"
            [class.cancelled]="trade.status === 'CANCELLED'">

            <!-- Card Header -->
            <div class="card-header">
                <div class="team-info">
                    <span class="team-name">{{ trade.team.name }}</span>
                    <span class="trade-date">{{ trade.createdAt | date:'dd/MM/yyyy' }}</span>
                </div>
                <div class="status-badge" [class]="trade.status.toLowerCase()">
                    {{ getStatusLabel(trade.status) }}
                </div>
            </div>

            <!-- Trade Visual -->
            <div class="trade-visual">
                <div class="player-out">
                    <div class="player-avatar out">
                        {{ trade.playerOut.username.charAt(0) }}
                    </div>
                    <div class="player-details">
                        <span class="player-name">{{ trade.playerOut.username }}</span>
                        <span class="player-region" *ngIf="trade.playerOut.region">{{ trade.playerOut.region }}</span>
                    </div>
                    <span class="direction-label">SORT</span>
                </div>

                <div class="exchange-arrow">
                    <mat-icon>swap_horiz</mat-icon>
                </div>

                <div class="player-in">
                    <div class="player-avatar in">
                        {{ trade.playerIn.username.charAt(0) }}
                    </div>
                    <div class="player-details">
                        <span class="player-name">{{ trade.playerIn.username }}</span>
                        <span class="player-region" *ngIf="trade.playerIn.region">{{ trade.playerIn.region }}</span>
                    </div>
                    <span class="direction-label">ENTRE</span>
                </div>
            </div>

            <!-- Card Actions -->
            <div class="card-actions">
                <button mat-button class="view-btn" (click)="viewTrade(trade.id)">
                    <mat-icon>visibility</mat-icon>
                    Détails
                </button>
                <button mat-button class="cancel-btn" *ngIf="trade.status === 'PENDING'"
                    (click)="cancelTrade(trade.id)">
                    <mat-icon>close</mat-icon>
                    Annuler
                </button>
            </div>
        </div>
    </div>
</div>