<!-- Teams Page - Premium Nexus Design -->
<div class="teams-page-container">
    <!-- Hero Section -->
    <header class="teams-hero">
        <div class="hero-decoration">
            <div class="glow-circle"></div>
        </div>

        <div class="hero-content">
            <h1 class="hero-title">
                <mat-icon class="hero-icon">groups</mat-icon>
                {{ gameId ? t.t('teams.list.titleGame') : t.t('teams.list.titleMine') }}
            </h1>
            <p class="hero-subtitle">{{ t.t('teams.list.subtitle') }}</p>

            <div class="hero-stats">
                <div class="hero-stat">
                    <span class="stat-value">{{ filteredTeams.length }}</span>
                    <span class="stat-label">{{ t.t('teams.common.teams') }}</span>
                </div>
                <div class="hero-divider"></div>
                <div class="hero-stat">
                    <span class="stat-value">{{ getTotalPlayers() }}</span>
                    <span class="stat-label">{{ t.t('teams.common.players') }}</span>
                </div>
            </div>
        </div>

        <div class="hero-actions">
            <button mat-raised-button class="create-btn" routerLink="/teams/create" *ngIf="!gameId">
                <mat-icon>add</mat-icon>
                {{ t.t('teams.list.createTeam') }}
            </button>
        </div>
    </header>

    <!-- Filter Bar -->
    <div class="teams-filter-bar">
        <div class="search-input-wrapper">
            <mat-icon>search</mat-icon>
            <input type="text" [placeholder]="t.t('teams.list.searchPlaceholder')" [value]="searchTerm"
                (input)="onSearch($event)" />
        </div>
    </div>

    <!-- Loading State -->
    <div class="loading-container" *ngIf="loading">
        <mat-spinner diameter="50"></mat-spinner>
        <p>{{ t.t('teams.list.loading') }}</p>
    </div>

    <!-- Error State -->
    <div class="error-state" *ngIf="!loading && error">
        <mat-icon>error_outline</mat-icon>
        <h3>{{ t.t('teams.list.errorTitle') }}</h3>
        <p>{{ error }}</p>
        <button mat-raised-button color="primary" (click)="refreshTeams()">
            <mat-icon>refresh</mat-icon>
            {{ t.t('common.retry') }}
        </button>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!loading && !error && filteredTeams.length === 0">
        <mat-icon>groups</mat-icon>
        <h3>{{ t.t('teams.list.emptyTitle') }}</h3>
        <p *ngIf="searchTerm">
            {{ t.t('teams.list.emptySearchResults').replace('{term}', searchTerm) }}
        </p>
        <p *ngIf="!searchTerm">{{ t.t('teams.list.emptyNoTeams') }}</p>
        <button mat-raised-button color="primary" routerLink="/games" *ngIf="!searchTerm">
            <mat-icon>sports_esports</mat-icon>
            {{ t.t('teams.list.viewGames') }}
        </button>
    </div>

    <!-- Teams Grid -->
    <div class="teams-grid" *ngIf="!loading && !error && filteredTeams.length > 0">
        <div class="premium-team-card" *ngFor="let team of filteredTeams; trackBy: trackByTeamId"
            [class.inactive]="!team.isActive" [routerLink]="['detail', team.id]">

            <div class="card-glow"></div>

            <!-- Card Header -->
            <div class="card-header">
                <div class="team-avatar">
                    <span>{{ team.name.charAt(0).toUpperCase() }}</span>
                </div>
                <div class="team-info">
                    <h3 class="team-name">{{ team.name }}</h3>
                    <span class="team-owner">
                        <mat-icon>person</mat-icon>
                        {{ team.ownerName }}
                    </span>
                </div>
                <div class="team-status" [class.active]="team.isActive">
                    <span class="status-dot"></span>
                </div>
            </div>

            <!-- Card Stats -->
            <div class="card-stats">
                <div class="stat-item">
                    <span class="stat-val">{{ team.playerCount }}</span>
                    <span class="stat-lbl">{{ t.t('teams.common.players') }}</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item points-stat">
                    <span class="stat-val">{{ team.totalPoints }}</span>
                    <span class="stat-lbl">{{ t.t('teams.common.points') }}</span>
                </div>
            </div>

            <!-- Players Preview -->
            <div class="players-preview">
                <span class="player-pill" *ngFor="let player of team.players.slice(0, 3)">
                    {{ player.gamertag || player.name }}
                </span>
                <span class="player-more" *ngIf="team.players.length > 3">
                    +{{ team.players.length - 3 }}
                </span>
            </div>

            <!-- Card Footer -->
            <div class="card-footer">
                <span class="update-info">{{ team.lastUpdate | date:'dd/MM/yyyy' }}</span>
                <span class="action-hint">
                    {{ t.t('teams.list.viewDetails') }}
                    <mat-icon>arrow_forward</mat-icon>
                </span>
            </div>
        </div>
    </div>
</div>
