<div class="ultra-nav-layout">
  <!-- Skip Navigation Links -->
  <div class="skip-links">
    <a href="#main-content" class="skip-link sr-only-focusable">Skip to main content</a>
    <a href="#main-navigation" class="skip-link sr-only-focusable">Skip to navigation</a>
  </div>

  <!-- Navigation Header -->
  <header class="nav-header">
    <div class="nav-header-content">
      <!-- Logo/Brand -->
      <div class="brand-section">
        <mat-icon class="brand-icon">sports_esports</mat-icon>
        <span class="brand-text">Fortnite Pronos</span>
      </div>

      <!-- Navigation Links -->
      <nav class="main-navigation" *ngIf="selectedGame">
        <button mat-button [routerLink]="['/games', selectedGame.id, 'dashboard']" routerLinkActive="active">
          <mat-icon>dashboard</mat-icon>
          <span>Dashboard</span>
        </button>
        <button mat-button [routerLink]="['/games', selectedGame.id, 'teams']" routerLinkActive="active">
          <mat-icon>groups</mat-icon>
          <span>Teams</span>
        </button>
        <button mat-button [routerLink]="['/games', selectedGame.id, 'leaderboard']" routerLinkActive="active">
          <mat-icon>leaderboard</mat-icon>
          <span>Leaderboard</span>
        </button>
        <button mat-button *ngIf="selectedGame.status === 'DRAFTING'" [routerLink]="['/games', selectedGame.id, 'draft']" routerLinkActive="active">
          <mat-icon>how_to_vote</mat-icon>
          <span>Draft</span>
        </button>
      </nav>

      <!-- User Actions -->
      <div class="user-section">
        <button mat-icon-button [matTooltip]="'Profile'" routerLink="/profile">
          <mat-icon>account_circle</mat-icon>
        </button>
        <button mat-icon-button [matTooltip]="'Settings'" routerLink="/settings">
          <mat-icon>settings</mat-icon>
        </button>
        <button mat-stroked-button class="logout-btn" (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Layout with Sidebar -->
  <div class="main-layout-container">
    <!-- Games Sidebar -->
    <aside class="games-sidebar">
      <div class="sidebar-header">
        <h3>
          <mat-icon>sports_esports</mat-icon>
          My Games
        </h3>
        <div class="sidebar-actions">
          <button mat-icon-button [matTooltip]="'Create Game'" (click)="createGame()">
            <mat-icon>add_circle</mat-icon>
          </button>
          <button mat-icon-button [matTooltip]="'Join with Code'" (click)="openJoinDialog()">
            <mat-icon>group_add</mat-icon>
          </button>
        </div>
      </div>

      <!-- Join Code Section -->
      <div class="join-code-section" *ngIf="showJoinCodeInput">
        <mat-form-field appearance="outline">
          <mat-label>Code</mat-label>
          <input matInput [(ngModel)]="invitationCode" (keyup.enter)="joinWithCode()" placeholder="Enter code">
          <mat-icon matSuffix>key</mat-icon>
        </mat-form-field>
        <div class="join-actions">
          <button mat-button (click)="cancelJoin()">Cancel</button>
          <button mat-raised-button color="primary" (click)="joinWithCode()" [disabled]="!invitationCode.trim()">
            Join
          </button>
        </div>
      </div>

      <!-- Games List -->
      <div class="games-list">
        <div class="loading-state" *ngIf="loading">
          <mat-progress-spinner diameter="40" mode="indeterminate"></mat-progress-spinner>
        </div>

        <div class="empty-state" *ngIf="!loading && userGames.length === 0">
          <mat-icon>sports_esports</mat-icon>
          <p>No games yet</p>
          <button mat-stroked-button (click)="createGame()">
            Create First Game
          </button>
        </div>

        <div class="game-item" 
             *ngFor="let game of userGames" 
             [class.selected]="selectedGame?.id === game.id"
             (click)="selectGame(game)">
          <div class="game-icon">
            <mat-icon [attr.data-status]="game.status">
              {{ getStatusIcon(game.status) }}
            </mat-icon>
          </div>
          <div class="game-info">
            <h4>{{ game.name }}</h4>
            <div class="game-meta">
              <mat-chip [attr.data-status]="game.status">
                {{ getStatusLabel(game.status) }}
              </mat-chip>
              <span class="participants">{{ game.participantCount }} players</span>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="ultra-main-content" id="main-content" role="main">
      <router-outlet></router-outlet>
    </main>
  </div>
</div> 